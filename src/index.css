@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Form inputs dark mode */
  .dark input[type="text"],
  .dark input[type="number"],
  .dark input[type="file"],
  .dark select,
  .dark textarea {
    @apply border-dracula-current bg-dracula-current text-dracula-foreground placeholder-dracula-comment;
  }

  .dark input[type="text"]:focus,
  .dark input[type="number"]:focus,
  .dark select:focus,
  .dark textarea:focus {
    @apply border-dracula-purple;
  }

  /* Form labels dark mode */
  .dark label {
    @apply text-dracula-comment;
  }
}

.floating-icon,
.floating-icon-alt,
.floating-icon-ghost {
  position: absolute;
  animation-iteration-count: infinite;
  animation-timing-function: ease-in-out;
  will-change: transform;
  pointer-events: none;
  transform-origin: center;
  opacity: var(--float-opacity, 0.22);
  filter: drop-shadow(0 24px 40px rgba(15, 23, 42, 0.06));
}

.floating-icon {
  animation-name: float-wander;
}

.floating-icon-alt {
  animation-name: float-wander-alt;
}

.floating-icon-ghost {
  animation-name: float-wander-ghost;
}

@keyframes float-wander {
  0% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
  }
  25% {
    transform: translate3d(var(--float-x, 36px), var(--float-y, -28px), 0) scale(1.05) rotate(2deg);
  }
  50% {
    transform: translate3d(calc(var(--float-x, 36px) * -0.6), calc(var(--float-y, -28px) * 0.6), 0) scale(0.97) rotate(-1deg);
  }
  75% {
    transform: translate3d(calc(var(--float-x, 36px) * 0.9), calc(var(--float-y, -28px) * -0.4), 0) scale(1.03) rotate(1.5deg);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
  }
}

@keyframes float-wander-alt {
  0% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
  }
  20% {
    transform: translate3d(calc(var(--float-x, -32px) * -0.4), calc(var(--float-y, 32px) * 0.8), 0) scale(1.04) rotate(-1deg);
  }
  45% {
    transform: translate3d(var(--float-x, -32px), calc(var(--float-y, 32px) * -0.6), 0) scale(0.98) rotate(2deg);
  }
  70% {
    transform: translate3d(calc(var(--float-x, -32px) * -0.7), calc(var(--float-y, 32px) * 0.4), 0) scale(1.02) rotate(-2deg);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
  }
}

@keyframes float-wander-ghost {
  0% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    opacity: var(--float-opacity, 0.12);
  }
  30% {
    transform: translate3d(calc(var(--float-x, 48px) * 0.8), calc(var(--float-y, 40px) * 0.4), 0) scale(1.06) rotate(3deg);
    opacity: calc(var(--float-opacity, 0.12) * 0.85);
  }
  55% {
    transform: translate3d(calc(var(--float-x, 48px) * -0.5), calc(var(--float-y, 40px) * -0.6), 0) scale(0.96) rotate(-3deg);
    opacity: calc(var(--float-opacity, 0.12) * 0.65);
  }
  85% {
    transform: translate3d(calc(var(--float-x, 48px) * 1.1), calc(var(--float-y, 40px) * -0.2), 0) scale(1.04) rotate(1deg);
    opacity: calc(var(--float-opacity, 0.12) * 0.9);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1) rotate(0deg);
    opacity: var(--float-opacity, 0.12);
  }
}

@media (prefers-reduced-motion: reduce) {
  .floating-icon,
  .floating-icon-alt,
  .floating-icon-ghost {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    animation-name: none !important;
  }
}

:root {
  color-scheme: light dark;
  /* Variables para safe area (notch) */
  --sat: env(safe-area-inset-top);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
  --sar: env(safe-area-inset-right);
}

html,
body,
#root {
  height: 100%;
  /* Soporte para viewport-fit=cover */
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

body {
  margin: 0;
  /* Fondo con degradado para status bar transl√∫cido */
  background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 50%, #f8fafc 100%);
}

/* Dark mode background */
.dark body {
  background: linear-gradient(135deg, #282a36 0%, #44475a 50%, #282a36 100%);
}

/* Custom Scrollbar Styles */
.scrollbar-thin::-webkit-scrollbar {
  height: 10px;
  width: 10px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  @apply bg-soft-gray-100 rounded-full;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-celeste-300 rounded-full hover:bg-celeste-400;
}

.dark .scrollbar-thin::-webkit-scrollbar-track {
  @apply bg-dracula-current;
}

.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  @apply bg-dracula-purple hover:bg-dracula-pink;
}

/* Firefox scrollbar */
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: #8CD8FF #F3F4F6;
}

.dark .scrollbar-thin {
  scrollbar-color: #BD93F9 #44475A;
}

/* Scroll indicator shadow */
.overflow-x-auto {
  position: relative;
}

/* Mobile: Always show scrollbar */
@media (max-width: 640px) {
  .scrollbar-thin::-webkit-scrollbar {
    height: 12px;
  }
}

.theme-toggle {
  position: relative;
  display: inline-block;
  width: 96px;
  height: 44px;
  cursor: pointer;
  --toggle-bg: rgba(248, 250, 252, 0.9);
  --toggle-track-bg: rgba(248, 250, 252, 0.9);
  --toggle-thumb-bg: #ffffff;
  --toggle-icon-inactive: #b6c2d9;
  --toggle-icon-sun: #f59f0b;
  --toggle-icon-moon: #6c7aa6;
  --toggle-shadow-track: inset 3px 3px 6px rgba(148, 163, 184, 0.35), inset -4px -4px 10px rgba(255, 255, 255, 0.92);
  --toggle-shadow-thumb: 6px 6px 12px rgba(148, 163, 184, 0.3), -6px -6px 12px rgba(255, 255, 255, 0.95);
}

.dark .theme-toggle {
  --toggle-bg: #303448;
  --toggle-track-bg: #3b3f56;
  --toggle-thumb-bg: #4b5169;
  --toggle-icon-inactive: rgba(248, 248, 242, 0.35);
  --toggle-icon-sun: #ffb86c;
  --toggle-icon-moon: #8be9fd;
  --toggle-shadow-track: inset 2px 2px 5px rgba(0, 0, 0, 0.38), inset -3px -3px 7px rgba(76, 82, 112, 0.7);
  --toggle-shadow-thumb: 4px 4px 10px rgba(0, 0, 0, 0.4), -4px -4px 10px rgba(255, 255, 255, 0.08);
}

.theme-toggle::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 32px;
  background: var(--toggle-bg);
}

.theme-toggle__input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
}

.theme-toggle__track {
  position: absolute;
  inset: 0;
  border-radius: 32px;
  background-color: var(--toggle-track-bg);
  box-shadow: var(--toggle-shadow-track);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 14px;
  transition: all 0.3s ease;
}

.theme-toggle__icon {
  width: 20px;
  height: 20px;
  transition: opacity 0.3s ease, color 0.3s ease;
}

.theme-toggle__icon--inactive {
  color: var(--toggle-icon-inactive);
}

.theme-toggle__thumb {
  position: absolute;
  top: 4px;
  left: 4px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background-color: var(--toggle-thumb-bg);
  box-shadow: var(--toggle-shadow-thumb);
  display: grid;
  place-items: center;
  transition: all 0.3s ease;
}

.dark .theme-toggle__thumb {
  box-shadow: var(--toggle-shadow-thumb), 0 0 18px rgba(255, 255, 255, 0.55);
}

.theme-toggle__thumb-icon {
  position: absolute;
  width: 18px;
  height: 18px;
  transition: opacity 0.3s ease, transform 0.3s ease;
}

.theme-toggle__thumb-icon--sun {
  color: var(--toggle-icon-sun);
}

.theme-toggle__thumb-icon--moon {
  color: var(--toggle-icon-moon);
}

.theme-toggle__input:not(:checked) + .theme-toggle__track .theme-toggle__icon--sun {
  opacity: 0;
}

.theme-toggle__input:not(:checked) + .theme-toggle__track .theme-toggle__icon--moon {
  opacity: 1;
}

.theme-toggle__input:not(:checked) ~ .theme-toggle__thumb .theme-toggle__thumb-icon--sun {
  opacity: 1;
  transform: scale(1);
}

.theme-toggle__input:not(:checked) ~ .theme-toggle__thumb .theme-toggle__thumb-icon--moon {
  opacity: 0;
  transform: scale(0.5);
}

.theme-toggle__input:checked ~ .theme-toggle__thumb {
  transform: translateX(52px);
}

.theme-toggle__input:checked + .theme-toggle__track .theme-toggle__icon--sun {
  opacity: 1;
}

.theme-toggle__input:checked + .theme-toggle__track .theme-toggle__icon--moon {
  opacity: 0;
}

.theme-toggle__input:checked ~ .theme-toggle__thumb .theme-toggle__thumb-icon--sun {
  opacity: 0;
  transform: scale(0.5);
}

.theme-toggle__input:checked ~ .theme-toggle__thumb .theme-toggle__thumb-icon--moon {
  opacity: 1;
  transform: scale(1);
}
